{{!
    This file is part the Local SITS Grade Push plugin for Moodle
    Moodle is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Moodle is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
}}
{{!
    @template local_sitsgradepush/import_preview

    Template for displaying import preview.

    Context variables required for this template:
    * importmodedescription - String, description of import mode
    * isreplace - Boolean, whether mode is replace
    * rowcount - Integer, number of rows to import
    * currentcount - Integer, current number of tiers
    * hastiers - Boolean, whether there are tiers to display
    * tiers - Array, array of new tier configurations
        * assessmenttype - String, assessment type code
        * tier - Integer, tier level
        * extensiondisplay - String, formatted extension display
        * breakdisplay - String, formatted break display
        * enabled - Boolean, whether tier is enabled
    * confirmurl - String, URL for confirm action
    * cancelurl - String, URL for cancel action

    Example context (json):
    {
        "importmodedescription": "Replace all existing tiers",
        "isreplace": true,
        "rowcount": 3,
        "currentcount": 5,
        "hastiers": true,
        "tiers": [
            {
                "assessmenttype": "CN01",
                "tier": 1,
                "extensiondisplay": "5 days",
                "breakdisplay": "",
                "enabled": true
            },
            {
                "assessmenttype": "CN01",
                "tier": 2,
                "extensiondisplay": "10 days",
                "breakdisplay": "",
                "enabled": true
            },
            {
                "assessmenttype": "EC03",
                "tier": 1,
                "extensiondisplay": "15 minutes",
                "breakdisplay": "5 minutes per hour",
                "enabled": true
            }
        ],
        "confirmurl": "manage_extension_tiers.php?action=confirmimport",
        "cancelurl": "manage_extension_tiers.php"
    }
}}
<div class="alert alert-warning">
    <h4>{{#str}} tier:importpreview, local_sitsgradepush {{/str}}</h4>
    <p>
        {{#str}} tier:importmode, local_sitsgradepush {{/str}}: <strong>{{importmodedescription}}</strong>
    </p>
    {{#isreplace}}
    <p class="alert alert-danger">
        {{#str}} tier:importreplacewarn, local_sitsgradepush, {{currentcount}} {{/str}}
    </p>
    {{/isreplace}}
    <p>
        {{#str}} tier:rowstoimport, local_sitsgradepush, {{rowcount}} {{/str}}
    </p>
</div>

<h4>{{#str}} tier:newconfiguration, local_sitsgradepush {{/str}}</h4>
{{> local_sitsgradepush/extension_tiers_table }}

<div class="mt-3">
    <form method="post" action="{{{confirmurl}}}" class="d-inline">
        <button type="submit" class="btn btn-primary">
            {{#str}} tier:confirmimport, local_sitsgradepush {{/str}}
        </button>
    </form>
    <a href="{{{cancelurl}}}" class="btn btn-secondary ml-2">
        {{#str}} cancel {{/str}}
    </a>
</div>
