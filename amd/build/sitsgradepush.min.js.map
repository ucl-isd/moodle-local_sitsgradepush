{"version":3,"file":"sitsgradepush.min.js","sources":["../src/sitsgradepush.js"],"sourcesContent":["import Ajax from 'core/ajax';\nimport notification from 'core/notification';\n\nexport const init = (coursemoduleid) => {\n    document.getElementById('local_sitsgradepush_pushbutton').addEventListener('click', (e) => {\n        e.preventDefault();\n        window.console.log('Pushing grades for course module id ' + coursemoduleid + '...');\n        // Schedule a task to push grades to SITS.\n        schedulePushTask(coursemoduleid);\n    });\n};\n\n/**\n * Schedule a task to push grades to SITS.\n * @param {int} coursemoduleid\n */\nfunction schedulePushTask(coursemoduleid) {\n    Ajax.call([{\n        methodname: 'local_sitsgradepush_schedule_push_task',\n        args: {\n            'coursemoduleid': coursemoduleid,\n        },\n    }])[0].done(function(response) {\n        notification.addNotification({\n            message: response.message,\n            type: response.success ? 'success' : 'warning'\n        });\n        if (response.success) {\n            // Get the push button.\n            let pushbuton = document.getElementById('local_sitsgradepush_pushbutton');\n\n            // Update the button text.\n            pushbuton.innerHTML = response.status;\n\n            // Disable the push button after scheduled push task successfully.\n            pushbuton.disabled = true;\n        }\n    }).fail(function(err) {\n        window.console.log(err);\n    });\n}\n"],"names":["coursemoduleid","document","getElementById","addEventListener","e","preventDefault","window","console","log","call","methodname","args","done","response","addNotification","message","type","success","pushbuton","innerHTML","status","disabled","fail","err","schedulePushTask"],"mappings":"oYAGoB,SAACA,gBACjBC,SAASC,eAAe,kCAAkCC,iBAAiB,SAAS,SAACC,GACjFA,EAAEC,iBACFC,OAAOC,QAAQC,IAAI,uCAAyCR,eAAiB,gBAU3DA,8BACjBS,KAAK,CAAC,CACPC,WAAY,yCACZC,KAAM,gBACgBX,mBAEtB,GAAGY,MAAK,SAASC,mCACJC,gBAAgB,CACzBC,QAASF,SAASE,QAClBC,KAAMH,SAASI,QAAU,UAAY,YAErCJ,SAASI,QAAS,KAEdC,UAAYjB,SAASC,eAAe,kCAGxCgB,UAAUC,UAAYN,SAASO,OAG/BF,UAAUG,UAAW,MAE1BC,MAAK,SAASC,KACbjB,OAAOC,QAAQC,IAAIe,QA9BnBC,CAAiBxB"}